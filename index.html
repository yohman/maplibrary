<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Leaflet Map Library</title>
	<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
	<!-- Remove MapLibre -->
	<!-- <script src="https://unpkg.com/maplibre-gl@3.1.0/dist/maplibre-gl.js"></script> -->
	<!-- <link href="https://unpkg.com/maplibre-gl@3.1.0/dist/maplibre-gl.css" rel="stylesheet"> -->
	
	<!-- Add Leaflet -->
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
	<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

	<link rel="stylesheet" href="css/style.css"> <!-- Assuming you have a styles.css file for custom styles -->

</head>
<body>
    <!-- Menu Toggle Button -->
	<button id="menu-toggle">
		<span></span>
		<span></span>
		<span></span>
	</button>

    <!-- Side Panel -->
	<div id="side-panel">
		<h1>HyperCities Map Library</h1>
		<input type="text" id="search-box" placeholder="Search maps by title...">
		<div id="map-count-display" style="margin-bottom: 15px; font-size: 0.9em; color: #999999;"></div> <!-- NEW: Map count display -->
		<div id="map-cards-container">
			<!-- Map cards will be populated here -->
		</div>
	</div>

    <!-- Map Container -->
	<div id="map-container"> <!-- NEW: wrapper for map -->
	    <div id="map"></div>
        <div id="opacity-slider-container"> <!-- This container will now hold both controls -->
            <div class="control-group"> <!-- NEW: Wrapper for bounds toggle -->
                <label for="bounds-toggle-switch">Show All Bounds:</label>
                <label class="switch">
                    <input type="checkbox" id="bounds-toggle-switch" checked> <!-- MODIFIED: Added checked attribute -->
                    <span class="slider round"></span>
                </label>
            </div>
            <hr> <!-- NEW: Horizontal line separator -->
            <div class="control-group"> <!-- NEW: Wrapper for opacity slider -->
                <label for="opacity-slider">Opacity:</label>
                <input type="range" id="opacity-slider" min="0" max="1" step="0.05" value="0.85">
            </div>
            <!-- NEW: Map Info Button and Panel -->
            <hr id="info-separator" style="display: none;">
            <div id="map-info-button-container" style="display: none;">
                <button id="map-info-toggle-button">i</button>
                <span>Map Information</span>
            </div>
            <div id="map-info-panel" style="display: none;">
                <!-- Map details will be populated here by JavaScript -->
            </div>
        </div>
    </div>
	<div id="timeline-panel">
		<div id="timeline-line-container">
			<div id="timeline-line"></div>
			<div id="timeline-circles-container">
				<!-- Circles will be added here by JavaScript -->
			</div>
		</div>
		<div id="timeline-zoom-indicator" style="position: absolute; top: 5px; right: 10px; color: #ccc; font-size: 0.8em;">Zoom: 1.0x</div>
		<div id="timeline-tooltip"></div>
	</div>

    <!-- Welcome Modal -->
    <div id="welcome-modal" class="modal-overlay">
        <div class="modal-content">
            <span id="modal-close-button" class="modal-close">&times;</span>
            <h1>HyperCities</h1>
			<p class="tagline">"A HyperCity is a real city overlaid with thick information networks that not only catalyze the present but also go back in time to document the past and go forward to project future possibilities. HyperCities are always under construction."</p>
            <div class="modal-body-columns">
				<div class="modal-column-left">
					<img src="hypercities480.gif" alt="HyperCities Animation" style="vertical-align: top;">
					
					<button id="begin-your-journey">Begin Your Journey</button>
				</div>
                <div class="modal-column-right">
					<h3>Explore the Map Library:</h3>
                    <ul>
						<li><strong>Search and Discover:</strong> Use the side panel (â˜°) to filter maps by title.</li>
						<li><strong>Explore Historical Maps:</strong> Click a map card, a point on the timeline, or a boundary on the map.</li>
						<li><strong>Navigate Time:</strong> The timeline displays maps across different years. Click circles to jump to specific times. Zoom and pan for detailed exploration.</li>
						<li><strong>Customize Your View:</strong> Toggle map boundaries to compare past and present, and adjust map opacity to blend different eras.</li>

                    </ul>
					<h3>About HyperCities:</h3>
					<p>HyperCities is based on the book <a href="https://escholarship.org/uc/item/3mh5t455" target="_blank">HyperCities: Thick Mapping in the Digital Humanities</a> by Todd Presner, David Shepard, and Yoh Kawano (Harvard University Press, 2014).</p>
                </div>
            </div>
        </div>
    </div>

	<script src="js/getdata.js"></script>
	<script src="js/map.js"></script>
</body>
</html>